<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Todo App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

  <style>
    body { font-family: sans-serif; background:#f4f4f4; padding:20px; }
    .card { padding:15px; border-radius:8px; margin:10px 0; }
    .green { background:#d1fae5; }
    .yellow { background:#fef9c3; }
    .red { background:#fee2e2; }
  </style>
</head>
<body>

<h2>ðŸ“‹ Todo App</h2>
<button id="loginBtn">Login with Google</button>

<div id="app" style="display:none;">
  <input id="taskInput" placeholder="à¸Šà¸·à¹ˆà¸­à¸‡à¸²à¸™">
  <input id="timeInput" type="datetime-local">
  <button id="addBtn">à¹€à¸žà¸´à¹ˆà¸¡</button>

  <div id="list"></div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCIkE5LKVC-qCkHU0o92Mur2FFAj1vyJu8",
  authDomain: "todo-549ee.firebaseapp.com",
  projectId: "todo-549ee",
  storageBucket: "todo-549ee.firebasestorage.app",
  messagingSenderId: "929282545436",
  appId: "1:929282545436:web:1842cf1ed8b2381209ccd9",
  measurementId: "G-X2R7W8BB76"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();

loginBtn.onclick = () => {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider);
};

auth.onAuthStateChanged(user => {
  if (user) {
    loginBtn.style.display = "none";
    appDiv.style.display = "block";
    loadTasks(user.uid);

    addBtn.onclick = () => {
      db.collection("tasks").add({
        uid: user.uid,
        task: taskInput.value,
        time: timeInput.value
      });
    }
  }
});

function loadTasks(uid) {
  db.collection("tasks").where("uid","==",uid)
  .onSnapshot(snapshot => {
    list.innerHTML = "";
    snapshot.forEach(doc => renderTask(doc.data()));
  });
}

function renderTask(data) {
  const now = new Date();
  const deadline = new Date(data.time);
  const diff = deadline - now;

  let color = "green";
  if (diff < 0) color = "red";
  else if (diff <= 86400000) color = "yellow";

  const div = document.createElement("div");
  div.className = "card " + color;
  div.innerHTML = `<b>${data.task}</b><br>${data.time}`;
  list.appendChild(div);
}
</script>

</body>
</html>
# Todo